<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="竹影">



<meta name="description" content="本文主要叙述单元测试框架Junit的使用。Junit官网地址:https://junit.org/junit4/参考https://skyao.gitbooks.io/learning-java-unit-test/content/junit/base/（对Junit官网的翻译）参考地址：https://blog.csdn.net/qq_17766199/article/details/78243">
<meta property="og:type" content="article">
<meta property="og:title" content="单元测试（一）-：JUnit4框架的使用">
<meta property="og:url" content="http://liyuncang.club/2018/06/14/单元测试（一）-：JUnit框架的使用/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:description" content="本文主要叙述单元测试框架Junit的使用。Junit官网地址:https://junit.org/junit4/参考https://skyao.gitbooks.io/learning-java-unit-test/content/junit/base/（对Junit官网的翻译）参考地址：https://blog.csdn.net/qq_17766199/article/details/78243">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://liyuncang.club/images/android/junit_01.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_01.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_04.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_05.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_02.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_03.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_06.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_07.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_08.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_09.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_10.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_11.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_12.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_13.png">
<meta property="og:image" content="http://liyuncang.club/images/test/junit_14.png">
<meta property="og:updated_time" content="2018-07-03T02:44:01.781Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="单元测试（一）-：JUnit4框架的使用">
<meta name="twitter:description" content="本文主要叙述单元测试框架Junit的使用。Junit官网地址:https://junit.org/junit4/参考https://skyao.gitbooks.io/learning-java-unit-test/content/junit/base/（对Junit官网的翻译）参考地址：https://blog.csdn.net/qq_17766199/article/details/78243">
<meta name="twitter:image" content="http://liyuncang.club/images/android/junit_01.png">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="我的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>单元测试（一）-：JUnit4框架的使用 | 我的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/my_avatar.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">竹影</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="/12345@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">竹影</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/my_avatar.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">竹影</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="/12345@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-单元测试（一）-：JUnit框架的使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/14/单元测试（一）-：JUnit框架的使用/" class="article-date">
      <time datetime="2018-06-14T10:04:13.000Z" itemprop="datePublished">2018-06-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      单元测试（一）-：JUnit4框架的使用
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>本文主要叙述单元测试框架Junit的使用。<br>Junit官网地址:<a href="https://junit.org/junit4/" target="_blank" rel="noopener">https://junit.org/junit4/</a><br>参考<a href="https://skyao.gitbooks.io/learning-java-unit-test/content/junit/base/" target="_blank" rel="noopener">https://skyao.gitbooks.io/learning-java-unit-test/content/junit/base/</a>（对Junit官网的翻译）<br>参考地址：<a href="https://blog.csdn.net/qq_17766199/article/details/78243176" target="_blank" rel="noopener">https://blog.csdn.net/qq_17766199/article/details/78243176</a></p>
<a id="more"></a>
<h4 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h4><h5 id="什么是单元测试"><a href="#什么是单元测试" class="headerlink" title="什么是单元测试"></a>什么是单元测试</h5><p>单元测试是参与项目开发的工程师在项目代码之外建立的白盒测试工程，用于执行项目中的目标函数并验证其状态或者结果，其中，单元指的是应用程序中可测试的最小的一组源代码。一组源代码可测试，一般要求其有明确的输入和输出。因此，一般来讲，源代码中包含明确的输入和输出的每一个方法被认为是一个可测试的单元。注意，这里指的输出，并不局限于方法的返回值或对输入参数的改变，而包括了方法的执行过程中，改变的任何数据。</p>
<h5 id="单元测试的目的"><a href="#单元测试的目的" class="headerlink" title="单元测试的目的"></a>单元测试的目的</h5><p>单元测试的目的，是将应用程序的所有源代码，隔离成最小的可测试的单元，保证每个单元的正确性。理想情况下，如果每个单元都能保证正确，就能保证应用程序整体相当程度的正确性。</p>
<h4 id="Junit介绍"><a href="#Junit介绍" class="headerlink" title="Junit介绍"></a>Junit介绍</h4><p>JUnit是Java最基础的测试框架。当我们新建工程时会默认加入,单元测试代码是放在src/test/java下面:<br><img src="/images/android/junit_01.png" alt><br>用时在app的build文件中添加依赖。注意：用于测试环境框架一律是testCompile开头。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    testImplementation &apos;junit:junit:4.12&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Junit中常用注解："><a href="#Junit中常用注解：" class="headerlink" title="Junit中常用注解："></a>Junit中常用注解：</h5><table>
<thead>
<tr>
<th>注解名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>@Test</td>
<td>表示此方法为测试方法</td>
</tr>
<tr>
<td>@Before</td>
<td>在每个测试方法前执行，可做初始化操作</td>
</tr>
<tr>
<td>@After</td>
<td>在每个测试方法后执行，可做释放资源操作</td>
</tr>
<tr>
<td>@Ignore</td>
<td>忽略的测试方法</td>
</tr>
<tr>
<td>@BeforeClass</td>
<td>在类中所有方法前运行。此注解修饰的方法必须是static void</td>
</tr>
<tr>
<td>@AfterClass</td>
<td>在类中最后运行。此注解修饰的方法必须是static void</td>
</tr>
<tr>
<td>@RunWith</td>
<td>指定该测试类使用某个运行器</td>
</tr>
<tr>
<td>@Parameters</td>
<td>指定测试类的测试数据集合</td>
</tr>
<tr>
<td>@Rule</td>
<td>重新制定测试类中方法的行为</td>
</tr>
<tr>
<td>@FixMethodOrder</td>
<td>指定测试类中方法的执行顺序</td>
</tr>
</tbody></table>
<p>执行顺序：@BeforeClass –&gt; @Before –&gt; @Test –&gt; @After –&gt; @AfterClass</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.After;</span><br><span class="line">import org.junit.AfterClass;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.BeforeClass;</span><br><span class="line">import org.junit.Ignore;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">public class OrderTest &#123;</span><br><span class="line">    @BeforeClass</span><br><span class="line">    public static void beforeClass() &#123;</span><br><span class="line">        System.out.print(&quot;Befor Class \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @AfterClass</span><br><span class="line">    public static void afterClass() &#123;</span><br><span class="line">        System.out.print(&quot;After Class \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void before() &#123;</span><br><span class="line">        System.out.print(&quot;Before \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @After</span><br><span class="line">    public void after() &#123;</span><br><span class="line">        System.out.print(&quot;After \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        System.out.print(&quot;test \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Ignore(&quot;忽略此测试&quot;)</span><br><span class="line">    @Test()</span><br><span class="line">    public void ignoreTest() &#123;</span><br><span class="line">        System.out.print(&quot;Ignore this Test \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：<br><img src="/images/test/junit_01.png" alt></p>
<h5 id="Assertions（断言"><a href="#Assertions（断言" class="headerlink" title="Assertions（断言)"></a>Assertions（断言)</h5><p>作用：是用于对程序进行调试的，对于执行结构的判断，而不是对于业务流程的判断。（相当于一个if ()语句，如果满足断言的执行程序，如果不满足则抛错误）。  </p>
<p>Assert类中主要方法如下：</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>方法描述</th>
</tr>
</thead>
<tbody><tr>
<td>assertEquals</td>
<td>断言传入的预期值与实际值是相等的</td>
</tr>
<tr>
<td>assertNotEquals</td>
<td>断言传入的预期值与实际值是不相等的</td>
</tr>
<tr>
<td>assertArrayEquals</td>
<td>断言传入的预期数组与实际数组是相等的</td>
</tr>
<tr>
<td>assertNull</td>
<td>断言传入的对象是为空</td>
</tr>
<tr>
<td>assertNotNull</td>
<td>断言传入的对象是不为空</td>
</tr>
<tr>
<td>assertTrue</td>
<td>断言条件为真</td>
</tr>
<tr>
<td>assertFalse</td>
<td>断言条件为假</td>
</tr>
<tr>
<td>assertSame</td>
<td>断言两个对象引用同一个对象，相当于“==”</td>
</tr>
<tr>
<td>assertNotSame</td>
<td>断言两个对象引用不同的对象，相当于“!=”</td>
</tr>
<tr>
<td>assertThat</td>
<td>断言实际值是否满足指定的条件</td>
</tr>
</tbody></table>
<p>注意：上面的每一个方法，都有对应的重载方法，可以在前面加一个String类型的参数，表示如果断言失败时的提示。一般assert方法参数顺序为期望值、实际值。但assertThat与其他assert方法相比，参数顺序相反，即期望值和实际值是相反的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.hamcrest.core.CombinableMatcher;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line"></span><br><span class="line">import static org.hamcrest.CoreMatchers.allOf;</span><br><span class="line">import static org.hamcrest.CoreMatchers.anyOf;</span><br><span class="line">import static org.hamcrest.CoreMatchers.both;</span><br><span class="line">import static org.hamcrest.CoreMatchers.containsString;</span><br><span class="line">import static org.hamcrest.CoreMatchers.equalTo;</span><br><span class="line">import static org.hamcrest.CoreMatchers.everyItem;</span><br><span class="line">import static org.hamcrest.CoreMatchers.hasItems;</span><br><span class="line">import static org.hamcrest.CoreMatchers.not;</span><br><span class="line">import static org.hamcrest.CoreMatchers.sameInstance;</span><br><span class="line">import static org.hamcrest.CoreMatchers.startsWith;</span><br><span class="line">import static org.junit.Assert.assertArrayEquals;</span><br><span class="line">import static org.junit.Assert.assertEquals;</span><br><span class="line">import static org.junit.Assert.assertFalse;</span><br><span class="line">import static org.junit.Assert.assertNotNull;</span><br><span class="line">import static org.junit.Assert.assertNotSame;</span><br><span class="line">import static org.junit.Assert.assertNull;</span><br><span class="line">import static org.junit.Assert.assertSame;</span><br><span class="line">import static org.junit.Assert.assertThat;</span><br><span class="line">import static org.junit.Assert.assertTrue;</span><br><span class="line"></span><br><span class="line">public class AssertTests &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertEquals() &#123;</span><br><span class="line">        assertEquals(&quot;failure - strings are not equal&quot;, &quot;text&quot;, &quot;text&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertNotEquals() &#123;</span><br><span class="line">        assertEquals(&quot;failure - strings are not equal&quot;, &quot;text&quot;, &quot;jpg&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertArrayEquals() &#123;</span><br><span class="line">        byte[] expected = &quot;trial&quot;.getBytes();</span><br><span class="line">        byte[] actual = &quot;trial&quot;.getBytes();</span><br><span class="line">        assertArrayEquals(&quot;failure - byte arrays not same&quot;, expected, actual);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertNull() &#123;</span><br><span class="line">        assertNull(&quot;should be null&quot;, null);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertNotNull() &#123;</span><br><span class="line">        assertNotNull(&quot;should not be null&quot;, new Object());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertTrue() &#123;</span><br><span class="line">        assertTrue(&quot;failure - should be true&quot;, true);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertFalse() &#123;</span><br><span class="line">        assertFalse(&quot;failure - should be false&quot;, false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertSame() &#123;</span><br><span class="line">        Integer aNumber = Integer.valueOf(768);</span><br><span class="line">        assertSame(&quot;should be same&quot;, aNumber, aNumber);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertNotSame() &#123;</span><br><span class="line">        assertNotSame(&quot;should not be same Object&quot;, new Object(), new Object());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // JUnit Matchers assertThat</span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertThatBothContainsString() &#123;</span><br><span class="line">        assertThat(&quot;albumen&quot;, both(containsString(&quot;a&quot;)).and(containsString(&quot;b&quot;)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertThatHasItems() &#123;</span><br><span class="line">        assertThat(Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;), hasItems(&quot;one&quot;, &quot;three&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertThatEveryItemContainsString() &#123;</span><br><span class="line">        assertThat(Arrays.asList(new String[]&#123;&quot;fun&quot;, &quot;ban&quot;, &quot;net&quot;&#125;), everyItem(containsString(&quot;n&quot;)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Core Hamcrest Matchers with assertThat</span><br><span class="line">    @Test</span><br><span class="line">    public void testAssertThatHamcrestCoreMatchers() &#123;</span><br><span class="line">        assertThat(&quot;good&quot;, allOf(equalTo(&quot;good&quot;), startsWith(&quot;good&quot;)));</span><br><span class="line">        assertThat(&quot;good&quot;, not(allOf(equalTo(&quot;bad&quot;), equalTo(&quot;good&quot;))));</span><br><span class="line">        assertThat(&quot;good&quot;, anyOf(equalTo(&quot;bad&quot;), equalTo(&quot;good&quot;)));</span><br><span class="line">        assertThat(7, not(CombinableMatcher.&lt;Integer&gt;either(equalTo(3)).or(equalTo(4))));</span><br><span class="line">        assertThat(new Object(), not(sameInstance(new Object())));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Suites-聚合测试套件"><a href="#Suites-聚合测试套件" class="headerlink" title="Suites(聚合测试套件)"></a>Suites(聚合测试套件)</h5><p>使用Suite作为runner,你可以手动创建一个包含多个类的测试套件.相当于JUint 3.8.x的 static test suite()方法.使用@RunWith(Suite.class)和@SuiteClasses(TestClass1.class, …)注解,当你运行该类的时候,它可以运行所有的SutieClasses指定的类。案例SuitesTest：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.junit.runners.Suite;</span><br><span class="line"></span><br><span class="line">@RunWith(Suite.class)</span><br><span class="line">@Suite.SuiteClasses(&#123;</span><br><span class="line">        TestFeatureLogin.class,</span><br><span class="line">        TestFeatureLogout.class,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">public class SuitesTest &#123;</span><br><span class="line">    // the class remains empty,</span><br><span class="line">    // used only as a holder for the above annotations</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TestFeatureLogin:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">public class TestFeatureLogin &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        System.out.print(&quot;TestFeatureLogin \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TestFeatureLogout:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">public class TestFeatureLogout &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        System.out.print(&quot;TestFeatureLogout \n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_04.png" alt></p>
<h5 id="Test-Execution-Order-测试执行顺序"><a href="#Test-Execution-Order-测试执行顺序" class="headerlink" title="Test Execution Order(测试执行顺序)"></a>Test Execution Order(测试执行顺序)</h5><p>在设计上Junit是没有指定测试方法的执行顺序的。到目前为止,方法的调用也只是根据反射API返回的顺序执行.然而,使用JVM的顺序是不明智的，因为JAVA不提供任何平台的执行顺序,而且JDK 7返回的是不确定的随机执行顺序.所以,你所写的测试代码通常也是没有执行顺序的.但是有的时候有预测的失败，比在某些平台上随机失败要好很多<br>从4.11版本,JUnit 将默认使用一些指定的顺序,但是不能确定它使用哪种顺序（MethodSorters.DEFAULT）.要改变执行顺序,只需要简单的在你的测试类中使用@FixMethodOrder注解并且指定可用的MethodSorters,如下:</p>
<ul>
<li>@FixMethodOrder(MethodSorters.JVM):由JVM返回的顺序执行方法,该方法可能每次的执行顺序都不同</li>
<li>@FixMethodOrder(MethodSorters.NAME_ASCENDING):按照测试方法名在字典中的排序执行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.FixMethodOrder;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runners.MethodSorters;</span><br><span class="line"></span><br><span class="line">@FixMethodOrder(value = MethodSorters.NAME_ASCENDING)</span><br><span class="line">public class ExecutionOrderTest &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testA() &#123;</span><br><span class="line">        System.out.println(&quot;first&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testB() &#123;</span><br><span class="line">        System.out.println(&quot;second&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testC() &#123;</span><br><span class="line">        System.out.println(&quot;third&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_05.png" alt></p>
<h5 id="Exception-Testing-异常测试"><a href="#Exception-Testing-异常测试" class="headerlink" title="Exception Testing (异常测试)"></a>Exception Testing (异常测试)</h5><h6 id="预期异常"><a href="#预期异常" class="headerlink" title="预期异常"></a>预期异常</h6><p>如何验证代码按预期抛出异常?验证代码正常完成是很重要的，但是确保代码在异常情况下按预期运行也是至关重要的。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new ArrayList&lt;Object&gt;().get(0);</span><br></pre></td></tr></table></figure>

<p>这段代码应该抛出IndexOutOfBoundsException。@Test注释有一个可选的参数<code>expected</code>，它以可转换的值作为值。如果我们想验证ArrayList抛出了正确的异常，可以这样写:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Test(expected = IndexOutOfBoundsException.class)</span><br><span class="line">public void empty()&#123;</span><br><span class="line">    new ArrayList&lt;Object&gt;().get(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应该小心使用<code>expected</code>的参数。如果方法中的任何代码抛出IndexOutOfBoundsException，则上述测试将通过。上述方法有其局限性，例如，我们不能查看异常信息。</p>
<h6 id="try-catch语法"><a href="#try-catch语法" class="headerlink" title="try/catch语法"></a>try/catch语法</h6><p>解决上述的局限性，在JUnit 3.x中我们可以使用try/catch语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testExceptionMessage() &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        new ArrayList&lt;Object&gt;().get(0);</span><br><span class="line">        fail(&quot;Expected an IndexOutOfBoundsException to be thrown&quot;);</span><br><span class="line">    &#125; catch (IndexOutOfBoundsException anIndexOutOfBoundsException) &#123;</span><br><span class="line">        assertThat(anIndexOutOfBoundsException.getMessage(), is(&quot;Index: 0, Size: 0&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="ExpectedException规则"><a href="#ExpectedException规则" class="headerlink" title="ExpectedException规则"></a>ExpectedException规则</h6><p>另外我们还可以使用ExpectedException规则。这个规则允许您不仅指出您期望的异常，而且还要指出您期望的异常消息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Rule</span><br><span class="line">public ExpectedException thrown = ExpectedException.none();</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void shouldTestExceptionMessage() throws IndexOutOfBoundsException &#123;</span><br><span class="line">    List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();</span><br><span class="line">    thrown.expect(IndexOutOfBoundsException.class);</span><br><span class="line">    thrown.expectMessage(containsString(&quot;Index: 0, Size: 0&quot;));</span><br><span class="line">    list.get(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>thrown.expect()</code> 可以指出我们期望的异常，<code>thrown.expectMessage</code>可以指出期望异常输出的消息。  </p>
<p>expectMessage还可以使用Matchers：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">thrown.expectMessage(containsString(&quot;Index: 0, Size: 0&quot;));</span><br></pre></td></tr></table></figure>

<p>可以使用Matchers来检查异常，如果异常具有您想要验证的嵌入状态:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.ExpectedException;</span><br><span class="line"></span><br><span class="line">import static org.hamcrest.CoreMatchers.containsString;</span><br><span class="line"></span><br><span class="line">public class ExceptionTest &#123;</span><br><span class="line"></span><br><span class="line">    @Rule</span><br><span class="line">    public ExpectedException thrown = ExpectedException.none();</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void shouldTestExceptionMessage() throws IndexOutOfBoundsException &#123;</span><br><span class="line">        TestThing testThing = new TestThing();</span><br><span class="line">        thrown.expect(IndexOutOfBoundsException.class);</span><br><span class="line">        thrown.expectMessage(containsString(&quot;Index: 0, Size: 0&quot;));</span><br><span class="line">        testThing.chuck();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private class TestThing &#123;</span><br><span class="line">        public void chuck() &#123;</span><br><span class="line">            throw new IndexOutOfBoundsException(&quot;Index: 0, Size: 0&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Matchers-and-assertThat-匹配器与断言"><a href="#Matchers-and-assertThat-匹配器与断言" class="headerlink" title="Matchers and assertThat(匹配器与断言)"></a>Matchers and assertThat(匹配器与断言)</h5><p>匹配器与断言配合使用：</p>
<table>
<thead>
<tr>
<th>匹配器</th>
<th>说明</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>is</td>
<td>断言参数等于后面给出的匹配表达式</td>
<td>assertThat(5, is (5));</td>
</tr>
<tr>
<td>not</td>
<td>断言参数不等于后面给出的匹配表达式</td>
<td>assertThat(5, not(6));</td>
</tr>
<tr>
<td>equalTo</td>
<td>断言参数相等</td>
<td>assertThat(30, equalTo(30));</td>
</tr>
<tr>
<td>equalToIgnoringCase</td>
<td>断言字符串相等忽略大小写</td>
<td>assertThat(“Ab”, equalToIgnoringCase(“ab”));</td>
</tr>
<tr>
<td>containsString</td>
<td>断言字符串包含某字符串</td>
<td>assertThat(“abc”, containsString(“bc”));</td>
</tr>
<tr>
<td>startsWith</td>
<td>断言字符串以某字符串开始</td>
<td>assertThat(“abc”, startsWith(“a”));</td>
</tr>
<tr>
<td>endsWith</td>
<td>断言字符串以某字符串结束</td>
<td>assertThat(“abc”, endsWith(“c”));</td>
</tr>
<tr>
<td>nullValue</td>
<td>断言参数的值为null</td>
<td>assertThat(null, nullValue());</td>
</tr>
<tr>
<td>notNullValue</td>
<td>断言参数的值不为null</td>
<td>assertThat(“abc”, notNullValue());</td>
</tr>
<tr>
<td>greaterThan</td>
<td>断言参数大于</td>
<td>assertThat(4, greaterThan(3));</td>
</tr>
<tr>
<td>lessThan</td>
<td>断言参数小于</td>
<td>assertThat(4, lessThan(6));</td>
</tr>
<tr>
<td>greaterThanOrEqualTo</td>
<td>断言参数大于等于</td>
<td>assertThat(4, greaterThanOrEqualTo(3));</td>
</tr>
<tr>
<td>lessThanOrEqualTo</td>
<td>断言参数小于等于</td>
<td>assertThat(4, lessThanOrEqualTo(6));</td>
</tr>
<tr>
<td>closeTo</td>
<td>断言浮点型数在某一范围内</td>
<td>assertThat(4.0, closeTo(2.6, 4.3));</td>
</tr>
<tr>
<td>allOf</td>
<td>断言符合所有条件，相当于&amp;&amp;</td>
<td>assertThat(4,allOf(greaterThan(3), lessThan(6)));</td>
</tr>
<tr>
<td>anyOf</td>
<td>断言符合某一条件，相当于或</td>
<td>assertThat(4,anyOf(greaterThan(9), lessThan(6)));</td>
</tr>
<tr>
<td>hasKey</td>
<td>断言Map集合含有此键</td>
<td>assertThat(map, hasKey(“key”));</td>
</tr>
<tr>
<td>hasValue</td>
<td>断言Map集合含有此值</td>
<td>assertThat(map, hasValue(value));</td>
</tr>
<tr>
<td>hasItem</td>
<td>断言迭代对象含有此元素</td>
<td>assertThat(list, hasItem(element));</td>
</tr>
</tbody></table>
<h5 id="忽略测试"><a href="#忽略测试" class="headerlink" title="忽略测试"></a>忽略测试</h5><p>如果由于某种原因，您不希望测试失败，您只是希望它被忽略，那么您将暂时禁用测试。<br>要忽略JUnit中的测试，您可以对方法进行注释，或者删除<code>@Test</code>注释;但是这样Junit不会报告这样的测试。或者，您可以在@Test之前或之后添加@Ignore注释。测试运行器将报告被忽略的测试数量，以及运行的测试数量和失败的测试数量。<br>注意，如果您想要记录一个测试被忽略的原因，@Ignore将接受一个可选参数(一个字符串),默认是<code>Test ignored.</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Ignore(&quot;忽略此测试&quot;)</span><br><span class="line">@Test()</span><br><span class="line">public void ignoreTest() &#123;</span><br><span class="line">    System.out.print(&quot;Ignore this Test \n&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Timeout-for-tests-测试超时"><a href="#Timeout-for-tests-测试超时" class="headerlink" title="Timeout for tests(测试超时)"></a>Timeout for tests(测试超时)</h5><p>如果你希望一个测试运行时间过长的情况下自动变成测试失败,有以下两种方式来实现：</p>
<h6 id="Test中的timeout参数-适用于测试方法"><a href="#Test中的timeout参数-适用于测试方法" class="headerlink" title="@Test中的timeout参数(适用于测试方法)"></a>@Test中的timeout参数(适用于测试方法)</h6><p>您可以指定以毫秒为单位超时时间。如果超过了时间限制,它会由异常触发一个失败：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Test(timeout=1000)</span><br><span class="line">public void testWithTimeout() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是通过在一个单独的线程中运行测试方法来实现的。如果测试运行的时间超过分配的超时时间，则测试将失败，JUnit将中断运行测试的线程。如果测试在执行可中断操作时超时，运行测试的线程将退出(如果测试处于无限循环中，运行测试的线程将永远运行，而其他测试将继续执行)。</p>
<h6 id="Timeout-Rule-适用于测试类中的所有测试用例"><a href="#Timeout-Rule-适用于测试类中的所有测试用例" class="headerlink" title="Timeout Rule(适用于测试类中的所有测试用例)"></a>Timeout Rule(适用于测试类中的所有测试用例)</h6><p>Timout Rule适用于一个测试类中所有的测试方法(共用一个超时时间).并会运行除了由timeout参数在单个测试上指定的其他任何超时时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.Timeout;</span><br><span class="line"></span><br><span class="line">public class HasGlobalTimeout &#123;</span><br><span class="line">    public static String log;</span><br><span class="line">    private final CountDownLatch latch = new CountDownLatch(1);</span><br><span class="line"></span><br><span class="line">    @Rule</span><br><span class="line">    public Timeout globalTimeout = Timeout.seconds(10); // 10 seconds max per method tested</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testSleepForTooLong() throws Exception &#123;</span><br><span class="line">        log += &quot;ran1&quot;;</span><br><span class="line">        TimeUnit.SECONDS.sleep(100); // sleep for 100 seconds</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testBlockForever() throws Exception &#123;</span><br><span class="line">        log += &quot;ran2&quot;;</span><br><span class="line">        latch.await(); // will block </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Timeout Rule指定的超时适用于整个测试类,包括@Before或者@After方法,如果测试方法是一个无限循环(或者其他原因不能响应中断),那么@After方法将不会被调用。</p>
<p>另外如果同时指定了timeout参数和rule参数，则规则如下：</p>
<ul>
<li>timeout参数比rule的时间要小的话覆盖rule的时间；</li>
<li>timeout参数比rule的时间要大的话没法覆盖rule；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.Timeout;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.CountDownLatch;</span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line">public class TimeOutTest &#123;</span><br><span class="line">    public static String log;</span><br><span class="line">    private final CountDownLatch latch = new CountDownLatch(1);</span><br><span class="line"></span><br><span class="line">    @Rule</span><br><span class="line">    public Timeout globalTimeout = Timeout.seconds(10); // 10 seconds max per method tested</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 这个方法的执行到失败的时间是5秒,也就是说timeout参数比rule的时间要小的话覆盖rule的时间</span><br><span class="line">     */</span><br><span class="line">    @Test(timeout = 1000 * 5)</span><br><span class="line">    public void testSleepForTooLong() throws Exception &#123;</span><br><span class="line">        log += &quot;ran1&quot;;</span><br><span class="line">        TimeUnit.SECONDS.sleep(8);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 这个方法的执行到失败的时间是10秒,也就是说timeout参数比rule的时间要大的话没法覆盖rule</span><br><span class="line">     */</span><br><span class="line">    @Test(timeout = 1000 * 15)</span><br><span class="line">    public void testBlockForever() throws Exception &#123;</span><br><span class="line">        log += &quot;ran2&quot;;</span><br><span class="line">        latch.await();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="全局超时管理JUnit-Foundation"><a href="#全局超时管理JUnit-Foundation" class="headerlink" title="全局超时管理JUnit Foundation"></a>全局超时管理JUnit Foundation</h6><p>JUnit官网翻译：JUnit Foundation提供了超时管理特性，允许您指定可配置的全局超时间隔。超时行为是由JUnit框架通过@Test注释的超时参数提供的。如果没有指定超时参数，或者配置的全局超时值指定更长的间隔，JUnit Foundation将使用一个可变的替换来覆盖@Test注释，该替换指定配置的超时值参数。Timeout management由HookInstallingRunner应用，它通过将TEST_TIMEOUT配置选项设置为希望的默认测试超时间隔(以毫秒为单位)来激活。这个超时规范适用于没有显式指定更长的间隔的每个测试方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import com.nordstrom.automation.junit.HookInstallingRunner;</span><br><span class="line"></span><br><span class="line">@RunWith(HookInstallingRunner.class)</span><br><span class="line">public class ExampleTest &#123;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>实际使用中</strong>：<br>首先需要导入包:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testImplementation &apos;com.nordstrom.tools:junit-foundation:3.2.0&apos;</span><br></pre></td></tr></table></figure>

<p>然后在app下新建<code>junit.properties</code>文件，指定超时时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">junit.timeout.test = 5000</span><br></pre></td></tr></table></figure>

<p>测试类中引用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import com.nordstrom.automation.junit.HookInstallingRunner;</span><br><span class="line">import com.nordstrom.automation.junit.MethodWatchers;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line">@RunWith(HookInstallingRunner.class)</span><br><span class="line">@MethodWatchers</span><br><span class="line">public class TimeOutTest implements Hooked &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void testHook() throws Exception &#123;</span><br><span class="line">        TimeUnit.SECONDS.sleep(10);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试中发现如果TimeOutTest不实现Hooked类，其无法给方法指定默认超时时间，查看HookInstallingRunner源码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Create an enhanced instance of the specified test class object.</span><br><span class="line"> * </span><br><span class="line"> * @param testObj test class object to be enhanced</span><br><span class="line"> * @return enhanced test class object</span><br><span class="line"> */</span><br><span class="line">private synchronized Object installHooks(Object testObj) &#123;</span><br><span class="line">    Class&lt;?&gt; testClass = testObj.getClass();</span><br><span class="line">    MethodInterceptor.attachWatchers(testClass);</span><br><span class="line">    </span><br><span class="line">    if (testObj instanceof Hooked) &#123;</span><br><span class="line">        return testObj;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Class&lt;?&gt; proxyType = proxyMap.get(testClass);</span><br><span class="line">    </span><br><span class="line">    if (proxyType == null) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            proxyType = new ByteBuddy()</span><br><span class="line">                    .subclass(testClass)</span><br><span class="line">                    .name(getSubclassName(testObj))</span><br><span class="line">                    .method(isAnnotatedWith(anyOf(Test.class, Before.class, After.class)))</span><br><span class="line">                    .intercept(MethodDelegation.to(MethodInterceptor.class))</span><br><span class="line">                    .implement(Hooked.class)</span><br><span class="line">                    .make()</span><br><span class="line">                    .load(testClass.getClassLoader())</span><br><span class="line">                    .getLoaded();</span><br><span class="line">            proxyMap.put(testClass, proxyType);</span><br><span class="line">        &#125; catch (SecurityException | IllegalArgumentException e) &#123;</span><br><span class="line">            throw UncheckedThrow.throwUnchecked(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    try &#123;</span><br><span class="line">        return proxyType.newInstance();</span><br><span class="line">    &#125; catch (InstantiationException | IllegalAccessException e) &#123;</span><br><span class="line">        throw UncheckedThrow.throwUnchecked(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果没实现Hooked类，则由ByteBuddy构建了新的类实现Hooked，然后给方法设置默认时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If configured for default test timeout, apply this value to every test that doesn&apos;t already specify a longer</span><br><span class="line"> * timeout interval.</span><br><span class="line"> * </span><br><span class="line"> * @param testObj test class object</span><br><span class="line"> */</span><br><span class="line">private void applyTimeout(Object testObj) &#123;</span><br><span class="line">    // if default test timeout is defined</span><br><span class="line">    if (config.containsKey(JUnitSettings.TEST_TIMEOUT.key())) &#123;</span><br><span class="line">        // get default test timeout</span><br><span class="line">        long defaultTimeout = config.getLong(JUnitSettings.TEST_TIMEOUT.key());</span><br><span class="line">        // iterate over test object methods</span><br><span class="line">        for (Method method : testObj.getClass().getDeclaredMethods()) &#123;</span><br><span class="line">            // get @Test annotation</span><br><span class="line">            Test annotation = method.getDeclaredAnnotation(Test.class);</span><br><span class="line">            // if annotation declared and current timeout is less than default</span><br><span class="line">            if ((annotation != null) &amp;&amp; (annotation.timeout() &lt; defaultTimeout)) &#123;</span><br><span class="line">                // set test timeout interval</span><br><span class="line">                MutableTest.proxyFor(method).setTimeout(defaultTimeout);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在applyTimeout方法中，获取方法的<code>@Test</code>等注释时为空，所以没有为方法设置全局超时参数。</p>
<p><strong>ByteBuddy不了解，不知道为何注释没有了，Google也没找到原因，烦</strong></p>
<h5 id="参数化测试"><a href="#参数化测试" class="headerlink" title="参数化测试"></a>参数化测试</h5><p>我们可以使用<code>@RunWith</code>和<code>@Parameters</code>来自定义运行器参数实现参数化测试。首先测试类上添加注解<code>@RunWith(Parameterized.class)</code>，在创建一个由 <code>@Parameters</code> 注解的public static方法，让返回一个对应的测试数据集合。最后创建构造方法，方法的参数顺序和类型与测试数据集合一一对应：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.junit.runners.Parameterized;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Collection;</span><br><span class="line"></span><br><span class="line">import static org.junit.Assert.assertEquals;</span><br><span class="line"></span><br><span class="line">@RunWith(Parameterized.class)</span><br><span class="line">public class ParameterizedTest &#123;</span><br><span class="line"></span><br><span class="line">    @Parameterized.Parameters</span><br><span class="line">    public static Collection&lt;Object[]&gt; data() &#123;</span><br><span class="line">        return Arrays.asList(new Object[][] &#123;</span><br><span class="line">                &#123; 0, 0 &#125;, &#123; 1, 1 &#125;, &#123; 2, 1 &#125;, &#123; 3, 2 &#125;, &#123; 4, 3 &#125;, &#123; 5, 5 &#125;, &#123; 6, 8 &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int fInput;</span><br><span class="line"></span><br><span class="line">    private int fExpected;</span><br><span class="line"></span><br><span class="line">    public ParameterizedTest(int input, int expected) &#123;</span><br><span class="line">        this.fInput = input;</span><br><span class="line">        this.fExpected = expected;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        assertEquals(fExpected, Fibonacci.compute(fInput));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Fibonacci:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">public class Fibonacci &#123;</span><br><span class="line">    public static int compute(int n) &#123;</span><br><span class="line">        int result = 0;</span><br><span class="line"></span><br><span class="line">        if (n &lt;= 1) &#123;</span><br><span class="line">            result = n;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            result = compute(n - 1) + compute(n - 2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们还可以使用@Parameter注解将值注入到字段中，而不需要构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(Parameterized.class)</span><br><span class="line">public class ParameterizedTest &#123;</span><br><span class="line"></span><br><span class="line">    @Parameterized.Parameters</span><br><span class="line">    public static Collection&lt;Object[]&gt; data() &#123;</span><br><span class="line">        return Arrays.asList(new Object[][] &#123;</span><br><span class="line">                &#123; 0, 0 &#125;, &#123; 1, 1 &#125;, &#123; 2, 1 &#125;, &#123; 3, 2 &#125;, &#123; 4, 3 &#125;, &#123; 5, 5 &#125;, &#123; 6, 8 &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Parameterized.Parameter // first data value (0) is default</span><br><span class="line">    public /* NOT private */ int fInput;</span><br><span class="line"></span><br><span class="line">    @Parameterized.Parameter(1)</span><br><span class="line">    public /* NOT private */ int fExpected;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        assertEquals(fExpected, Fibonacci.compute(fInput));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：必须是public的。</p>
<p>如果您的测试只需要一个参数，则不需要用数组来包装它。可以直接使用一个可迭代的或对象数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Parameters</span><br><span class="line">public static Iterable&lt;? extends Object&gt; data() &#123;</span><br><span class="line">    return Arrays.asList(&quot;first test&quot;, &quot;second test&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有为了方便地识别参数化测试中的各个测试用例，您可以使用@Parameters注释提供一个名称。此名称允许包含在运行时替换的占位符:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.junit.runners.Parameterized;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Collection;</span><br><span class="line"></span><br><span class="line">import static org.junit.Assert.assertEquals;</span><br><span class="line"></span><br><span class="line">@RunWith(Parameterized.class)</span><br><span class="line">public class ParameterizedTest &#123;</span><br><span class="line"></span><br><span class="line">    @Parameterized.Parameters(name = &quot;&#123;index&#125;: fib(&#123;0&#125;)=&#123;1&#125;&quot;)</span><br><span class="line">    public static Collection&lt;Object[]&gt; data() &#123;</span><br><span class="line">        return Arrays.asList(new Object[][] &#123;</span><br><span class="line">                &#123; 0, 0 &#125;, &#123; 1, 1 &#125;, &#123; 2, 1 &#125;, &#123; 3, 2 &#125;, &#123; 4, 3 &#125;, &#123; 5, 5 &#125;, &#123; 6, 8 &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int fInput;</span><br><span class="line"></span><br><span class="line">    private int fExpected;</span><br><span class="line"></span><br><span class="line">    public ParameterizedTest(int input, int expected) &#123;</span><br><span class="line">        this.fInput = input;</span><br><span class="line">        this.fExpected = expected;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        assertEquals(fExpected, Fibonacci.compute(fInput));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果：<br><img src="/images/test/junit_02.png" alt><br><img src="/images/test/junit_03.png" alt></p>
<h5 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h5><p>Rules允许在测试类中对每个测试方法的行为进行非常灵活的添加或重新定义。测试人员可以重用或扩展下面提供的规则之一，或者编写自己的规则。<br>下面这个例子中使用了TemporaryFolder和ExpectedException规则:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class DigitalAssetManagerTest &#123;</span><br><span class="line">  @Rule</span><br><span class="line">  public final TemporaryFolder tempFolder = new TemporaryFolder();</span><br><span class="line"></span><br><span class="line">  @Rule</span><br><span class="line">  public final ExpectedException exception = ExpectedException.none();</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void countsAssets() throws IOException &#123;</span><br><span class="line">    File icon = tempFolder.newFile(&quot;icon.png&quot;);</span><br><span class="line">    File assets = tempFolder.newFolder(&quot;assets&quot;);</span><br><span class="line">    createAssets(assets, 3);</span><br><span class="line"></span><br><span class="line">    DigitalAssetManager dam = new DigitalAssetManager(icon, assets);</span><br><span class="line">    assertEquals(3, dam.getAssetCount());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void createAssets(File assets, int numberOfAssets) throws IOException &#123;</span><br><span class="line">    for (int index = 0; index &lt; numberOfAssets; index++) &#123;</span><br><span class="line">      File asset = new File(assets, String.format(&quot;asset-%d.mpg&quot;, index));</span><br><span class="line">      Assert.assertTrue(&quot;Asset couldn&apos;t be created.&quot;, asset.createNewFile());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void throwsIllegalArgumentExceptionIfIconIsNull() &#123;</span><br><span class="line">    exception.expect(IllegalArgumentException.class);</span><br><span class="line">    exception.expectMessage(&quot;Icon is null, not a file, or doesn&apos;t exist.&quot;);</span><br><span class="line">    new DigitalAssetManager(null, null);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="TemporaryFolder-Rule"><a href="#TemporaryFolder-Rule" class="headerlink" title="TemporaryFolder Rule:"></a>TemporaryFolder Rule:</h6><p>TemporaryFolder规则允许在测试方法创建文件或者文件夹，并且在方法完成时删除创建好的文件或文件夹.当资源无法被删除时默认情况下不会抛出异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static class HasTempFolder &#123;</span><br><span class="line">  @Rule</span><br><span class="line">  public final TemporaryFolder folder = new TemporaryFolder();</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void testUsingTempFolder() throws IOException &#123;</span><br><span class="line">    File createdFile = folder.newFile(&quot;myfile.txt&quot;);</span><br><span class="line">    File createdFolder = folder.newFolder(&quot;subfolder&quot;);</span><br><span class="line">    // ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>TemporaryFolder#newFolder(String… folderNames)递归创建临时文件夹</li>
<li>TemporaryFolder#newFile()创建一个随机命名的新文件，#newFolder()创建一个随机命名的新文件夹</li>
<li>从版本4.13临时文件夹开始，可选地允许严格验证已删除的资源，如果无法删除资源，则使用AssertionError进行测试。只能使用#builder()方法来选择此特性。默认情况下，会禁用严格的验证，以保持向后兼容性。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Rule </span><br><span class="line">public TemporaryFolder folder = TemporaryFolder.builder().assureDeletion().build();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h6 id="ExternalResource-Rules"><a href="#ExternalResource-Rules" class="headerlink" title="ExternalResource Rules"></a>ExternalResource Rules</h6><p>ExternalResource是一些类(如TemporaryFolder)的基类，用于在测试之前设置外部资源(文件、套接字、服务器、数据库连接等)，并保证在测试之后将其销毁:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public static class UsesExternalResource &#123;</span><br><span class="line">  Server myServer = new Server();</span><br><span class="line">  </span><br><span class="line">  @Rule</span><br><span class="line">  public final ExternalResource resource = new ExternalResource() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void before() throws Throwable &#123;</span><br><span class="line">      myServer.connect();</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    protected void after() &#123;</span><br><span class="line">      myServer.disconnect();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testFoo() &#123;</span><br><span class="line">    new Client().run(myServer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="ErrorCollector-Rule"><a href="#ErrorCollector-Rule" class="headerlink" title="ErrorCollector Rule"></a>ErrorCollector Rule</h6><p>ErrorCollector规则允许在发现第一个问题后继续执行测试(例如，收集表中所有不正确的行，并同时报告它们):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static class UsesErrorCollectorTwice &#123;</span><br><span class="line">  @Rule</span><br><span class="line">  public final ErrorCollector collector = new ErrorCollector();</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void example() &#123;</span><br><span class="line">    collector.addError(new Throwable(&quot;first thing went wrong&quot;));</span><br><span class="line">    collector.addError(new Throwable(&quot;second thing went wrong&quot;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="Verifier-Rule"><a href="#Verifier-Rule" class="headerlink" title="Verifier Rule"></a>Verifier Rule</h6><p>Verifier是在每个测试方法已经结束的时候，再加入一些额外的逻辑，只有额外的逻辑也通过，才表示测试成功，否则，测试依旧失败，即使在之前的运行中都是成功的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.Verifier;</span><br><span class="line"></span><br><span class="line">import static org.hamcrest.CoreMatchers.containsString;</span><br><span class="line">import static org.junit.Assert.assertEquals;</span><br><span class="line">import static org.junit.Assert.assertThat;</span><br><span class="line"></span><br><span class="line">public class VerifierTest &#123;</span><br><span class="line">    private static String sequence = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    @Rule</span><br><span class="line">    public final Verifier collector = new Verifier() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected void verify() &#123;</span><br><span class="line">            assertEquals(&quot;test verify &quot;, sequence);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void example() &#123;</span><br><span class="line">        sequence += &quot;test &quot;;</span><br><span class="line">        assertEquals(&quot;test &quot;, sequence);//即便这里校验正确,由于Verifier的验证错误,也会导致他的验证失败</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void verifierRunsAfterTest() &#123;</span><br><span class="line">        sequence += &quot;verify &quot;;</span><br><span class="line">        assertThat(sequence,containsString(&quot;test&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：<br><img src="/images/test/junit_06.png" alt></p>
<h6 id="TestWatcher-Rules"><a href="#TestWatcher-Rules" class="headerlink" title="TestWatcher Rules"></a>TestWatcher Rules</h6><p>TestWatcher为子类提供了四个事件方法以监控测试方法在运行过程中的状态，一般它可以作为信息记录使用。</p>
<ul>
<li>如果TestWatcher作为@ClassRule注解字段，则该测试类在运行之前（调用所有的@BeforeClass注解方法之前）会调用starting()方法；当所有@AfterClass注解方法调用结束后，succeeded()方法会被调用；若@AfterClass注解方法中出现异常，则failed()方法会被调用；最后，finished()方法会被调用；所有这些方法的Description是Runner对应的Description。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.Verifier;</span><br><span class="line"></span><br><span class="line">import static org.hamcrest.CoreMatchers.containsString;</span><br><span class="line">import static org.junit.Assert.assertEquals;</span><br><span class="line">import static org.junit.Assert.assertThat;</span><br><span class="line"></span><br><span class="line">public class VerifierTest &#123;</span><br><span class="line">    private static String sequence = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    @Rule</span><br><span class="line">    public final Verifier collector = new Verifier() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected void verify() &#123;</span><br><span class="line">            assertEquals(&quot;test verify &quot;, sequence);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void example() &#123;</span><br><span class="line">        sequence += &quot;test &quot;;</span><br><span class="line">        assertEquals(&quot;test &quot;, sequence);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void verifierRunsAfterTest() &#123;</span><br><span class="line">        sequence += &quot;verify &quot;;</span><br><span class="line">        assertThat(sequence,containsString(&quot;test&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<img src="/images/test/junit_07.png" width="600" height="450">

<ul>
<li>如果TestWatcher作为@Rule注解字段，则在每个测试方法运行前（所有的@Before注解方法运行前）会调用starting()方法；当所有@After注解方法调用结束后，succeeded()方法会被调用；若@After注解方法中跑出异常，则failed()方法会被调用；最后，finished()方法会被调用；所有Description的实例是测试方法的Description实例。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.After;</span><br><span class="line">import org.junit.AssumptionViolatedException;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.TestRule;</span><br><span class="line">import org.junit.rules.TestWatcher;</span><br><span class="line">import org.junit.runner.Description;</span><br><span class="line">import org.junit.runners.model.Statement;</span><br><span class="line"></span><br><span class="line">import static org.assertj.core.api.Assertions.assertThat;</span><br><span class="line"></span><br><span class="line">public class VerifierTest &#123;</span><br><span class="line">    private static String watchedLog = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    @Rule</span><br><span class="line">    public TestRule watchman = new TestWatcher() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Statement apply(Statement base, Description description) &#123;</span><br><span class="line">            return super.apply(base, description);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected void succeeded(Description description) &#123;</span><br><span class="line">            watchedLog += description.getDisplayName() + &quot; &quot; + &quot;success!\n&quot;;</span><br><span class="line">            System.out.println(watchedLog);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected void failed(Throwable e, Description description) &#123;</span><br><span class="line">            watchedLog += description.getDisplayName() + &quot; &quot; + e.getClass().getSimpleName() + &quot;\n&quot;;</span><br><span class="line">            System.out.println(watchedLog);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected void skipped(AssumptionViolatedException e, Description description) &#123;</span><br><span class="line">            watchedLog += description.getDisplayName() + &quot; &quot; + e.getClass().getSimpleName() + &quot;\n&quot;;</span><br><span class="line">            System.out.println(watchedLog);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected void starting(Description description) &#123;</span><br><span class="line">            super.starting(description);</span><br><span class="line">            System.out.println(&quot;starting&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected void finished(Description description) &#123;</span><br><span class="line">            super.finished(description);</span><br><span class="line">            System.out.println(&quot;finished&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void before() &#123;</span><br><span class="line">        System.out.println(&quot;before&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @After</span><br><span class="line">    public void after() &#123;</span><br><span class="line">        System.out.println(&quot;after&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void fails() &#123;</span><br><span class="line">        System.out.println(&quot;fails&quot;);</span><br><span class="line">        assertThat(1).isEqualTo(2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void succeeds() &#123;</span><br><span class="line">        System.out.println(&quot;success&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<img src="/images/test/junit_08.png" width="600" height="400">

<h6 id="TestName-Rule"><a href="#TestName-Rule" class="headerlink" title="TestName Rule"></a>TestName Rule</h6><p>TestName规则使当前的测试名在测试方法中可用:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class NameRuleTest &#123;</span><br><span class="line">  @Rule</span><br><span class="line">  public final TestName name = new TestName();</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testA() &#123;</span><br><span class="line">    assertEquals(&quot;testA&quot;, name.getMethodName());</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testB() &#123;</span><br><span class="line">    assertEquals(&quot;testB&quot;, name.getMethodName());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="Timeout-Rule"><a href="#Timeout-Rule" class="headerlink" title="Timeout Rule"></a>Timeout Rule</h6><p>Timeout规则对类中的所有测试方法应用相同的超时:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public static class HasGlobalTimeout &#123;</span><br><span class="line">  public static String log;</span><br><span class="line">  </span><br><span class="line">  @Rule</span><br><span class="line">  public final TestRule globalTimeout = Timeout.millis(20);</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testInfiniteLoop1() &#123;</span><br><span class="line">    log += &quot;ran1&quot;;</span><br><span class="line">    for(;;) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testInfiniteLoop2() &#123;</span><br><span class="line">    log += &quot;ran2&quot;;</span><br><span class="line">    for(;;) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="ExpectedException-Rules"><a href="#ExpectedException-Rules" class="headerlink" title="ExpectedException Rules"></a>ExpectedException Rules</h6><p>ExpectedException规则允许测试中指定预期的异常类型和消息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public static class HasExpectedException &#123;</span><br><span class="line">  @Rule</span><br><span class="line">  public final ExpectedException thrown = ExpectedException.none();</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void throwsNothing() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void throwsNullPointerException() &#123;</span><br><span class="line">    thrown.expect(NullPointerException.class);</span><br><span class="line">    throw new NullPointerException();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void throwsNullPointerExceptionWithMessage() &#123;</span><br><span class="line">    thrown.expect(NullPointerException.class);</span><br><span class="line">    thrown.expectMessage(&quot;happened?&quot;);</span><br><span class="line">    thrown.expectMessage(startsWith(&quot;What&quot;));</span><br><span class="line">    throw new NullPointerException(&quot;What happened?&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="ClassRule"><a href="#ClassRule" class="headerlink" title="ClassRule"></a>ClassRule</h6><p>ClassRule扩展了方法级别的规则,添加了可以影响类的运行的的静态属性。任何ParentRunner的子类,包括标准BlockJUnit4ClassRunner和Suite类,都支持ClassRule。</p>
<p>这里有一个测试套件，在所有测试类运行之前连接到服务器一次，在它们完成之后断开连接:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(Suite.class)</span><br><span class="line">@SuiteClasses(&#123;A.class, B.class, C.class&#125;)</span><br><span class="line">public class UsesExternalResource &#123;</span><br><span class="line">  public static final Server myServer = new Server();</span><br><span class="line"></span><br><span class="line">  @ClassRule</span><br><span class="line">  public static final ExternalResource resource = new ExternalResource() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void before() throws Throwable &#123;</span><br><span class="line">      myServer.connect();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void after() &#123;</span><br><span class="line">      myServer.disconnect();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="RuleChain"><a href="#RuleChain" class="headerlink" title="RuleChain"></a>RuleChain</h6><p>RuleChain支持TestRule的排序:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.rules.RuleChain;</span><br><span class="line">import org.junit.rules.TestRule;</span><br><span class="line">import org.junit.runner.Description;</span><br><span class="line">import org.junit.runners.model.Statement;</span><br><span class="line"></span><br><span class="line">import static org.assertj.core.api.Assertions.assertThat;</span><br><span class="line"></span><br><span class="line">public class RuleChainTest &#123;</span><br><span class="line">    @Rule</span><br><span class="line">    public TestRule chain = RuleChain</span><br><span class="line">            .outerRule(new LoggingRule(&quot;outer rule&quot;))</span><br><span class="line">            .around(new LoggingRule(&quot;middle rule&quot;))</span><br><span class="line">            .around(new LoggingRule(&quot;inner rule&quot;));</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void example() &#123;</span><br><span class="line">        assertThat(true).isTrue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class LoggingRule implements TestRule &#123;</span><br><span class="line">        private String str = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">        public LoggingRule(String str) &#123;</span><br><span class="line">            this.str = str;</span><br><span class="line">            System.out.print(str +&quot; \n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Statement apply(Statement base, Description description) &#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">            return base;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_09.png" alt></p>
<h6 id="Custom-Rules"><a href="#Custom-Rules" class="headerlink" title="Custom Rules"></a>Custom Rules</h6><p>大多数自定义规则可以作为ExternalResource规则的扩展来实现。但是，如果您需要有关测试类或方法的更多信息，则需要实现TestRule接口。<br>实现TestRule需要自定义一个构造方法,添加的方法用于测试,并且提供一个新的Statement。例如为每个测试记录日志:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.rules.TestRule;</span><br><span class="line">import org.junit.runner.Description;</span><br><span class="line">import org.junit.runners.model.Statement;</span><br><span class="line"></span><br><span class="line">import java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line">public class TestLogger implements TestRule &#123;</span><br><span class="line">    private Logger logger;</span><br><span class="line"></span><br><span class="line">    public Logger getLogger() &#123;</span><br><span class="line">        return this.logger;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Statement apply(final Statement base, final Description description) &#123;</span><br><span class="line">        return new Statement() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void evaluate() throws Throwable &#123;</span><br><span class="line">                logger = Logger.getLogger(description.getTestClass().getName() + &apos;.&apos; + description.getDisplayName());</span><br><span class="line">                base.evaluate();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应用这条规则：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.Rule;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line">public class MyLoggerTest &#123;</span><br><span class="line">    @Rule</span><br><span class="line">    public final TestLogger logger = new TestLogger();</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void checkOutMyLogger() &#123;</span><br><span class="line">        final Logger log = logger.getLogger();</span><br><span class="line">        log.warning(&quot;Your test is showing!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        Logger logger = this.logger.getLogger();</span><br><span class="line">        logger.info(&quot;hello&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_10.png" alt></p>
<h5 id="Theories-理论"><a href="#Theories-理论" class="headerlink" title="Theories 理论"></a>Theories 理论</h5><p>它分为两部分：一个是提供数据点集(比如待测试的数据)的方法，另一个是理论本身。这个理论看起来几乎就像一个测试，但是它有一个不同的注解(@Theory)，并且它需要参数。类通过使用数据点集的任意一种可能的组合来执行所有理论。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.experimental.theories.DataPoints;</span><br><span class="line">import org.junit.experimental.theories.Theories;</span><br><span class="line">import org.junit.experimental.theories.Theory;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line"></span><br><span class="line">import static org.assertj.core.api.Assertions.assertThat;</span><br><span class="line"></span><br><span class="line">@RunWith(Theories.class)</span><br><span class="line">public class TheoriesTest &#123;</span><br><span class="line">    @DataPoints</span><br><span class="line">    public static int[] positiveIntegers() &#123;</span><br><span class="line">        return new int[]&#123;1, 2, 3&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Theory</span><br><span class="line">    public void test(Integer a, Integer b) &#123;</span><br><span class="line">        System.out.print(&quot;a = &quot; + a + &quot;  b = &quot; + b + &quot; \n&quot;);</span><br><span class="line">        assertThat(a + b &gt; a).isTrue();</span><br><span class="line">        assertThat(a + b &gt; b).isTrue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_11.png" alt></p>
<p><strong>Theories支持在参数中内嵌一套整数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.experimental.theories.DataPoints;</span><br><span class="line">import org.junit.experimental.theories.Theories;</span><br><span class="line">import org.junit.experimental.theories.Theory;</span><br><span class="line">import org.junit.experimental.theories.suppliers.TestedOn;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line"></span><br><span class="line">import static org.assertj.core.api.Assertions.assertThat;</span><br><span class="line">import static org.hamcrest.CoreMatchers.not;</span><br><span class="line">import static org.junit.Assume.assumeThat;</span><br><span class="line"></span><br><span class="line">@RunWith(Theories.class)</span><br><span class="line">public class TheoriesTest &#123;</span><br><span class="line">    </span><br><span class="line">    @Theory</span><br><span class="line">    public void multiplyIsInverseOfDivideWithInlineDataPoints(@TestedOn(ints = &#123;0, 5, 10&#125;) int amount,</span><br><span class="line">                                                              @TestedOn(ints = &#123;0, 1, 2&#125;) int m) &#123;</span><br><span class="line">        assumeThat(m, not(0));</span><br><span class="line">        System.out.println(&quot;amount:&quot;+amount+&quot;,m:&quot;+m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_12.png" alt></p>
<p><strong>你也可以自定义来拓展参数的提供方案</strong><br>Between:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.experimental.theories.ParametersSuppliedBy;</span><br><span class="line"></span><br><span class="line">import java.lang.annotation.Retention;</span><br><span class="line">import java.lang.annotation.RetentionPolicy;</span><br><span class="line">import java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line">import static java.lang.annotation.ElementType.PARAMETER;</span><br><span class="line"></span><br><span class="line">@ParametersSuppliedBy(BetweenSupplier.class)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(PARAMETER)</span><br><span class="line">public @interface Between &#123;</span><br><span class="line">    int first();</span><br><span class="line"></span><br><span class="line">    int last();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BetweenSupplier:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import org.junit.experimental.theories.ParameterSignature;</span><br><span class="line">import org.junit.experimental.theories.ParameterSupplier;</span><br><span class="line">import org.junit.experimental.theories.PotentialAssignment;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class BetweenSupplier extends ParameterSupplier &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;PotentialAssignment&gt; getValueSources(ParameterSignature sig) &#123;</span><br><span class="line">        Between annotation = sig.getAnnotation(Between.class);</span><br><span class="line"></span><br><span class="line">        ArrayList list = new ArrayList();</span><br><span class="line">        for (int i = annotation.first(); i &lt;= annotation.last(); i++) &#123;</span><br><span class="line">            list.add(PotentialAssignment.forValue(&quot;ints&quot;, i));</span><br><span class="line">        &#125;</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Theory</span><br><span class="line">public void multiplyIsInverseOfDivideWithInlineDataPoints2(@Between(first = -3, last = -1) int amount,</span><br><span class="line">                                                           @Between(first = 1, last = 3) int m) &#123;</span><br><span class="line">    assumeThat(m, not(0));</span><br><span class="line">    System.out.println(&quot;amount:&quot;+amount+&quot;,m:&quot;+m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/test/junit_13.png" alt></p>
<h5 id="Test-fixtures"><a href="#Test-fixtures" class="headerlink" title="Test fixtures"></a>Test fixtures</h5><p>Test fixtures是对象的一种稳定状态.测试运行的基准.一个test fixture是为了在测试运行之前提供稳定的,公共的可重复的运行环境.例如:</p>
<ul>
<li>准备输入数据和创建Mock对象</li>
<li>加载数据库或者已知的数据</li>
<li>复制特定的已经文件,创建一个test fixture用来初始化某些状态<br>JUnit提供可以在每个测试运行前后都运行fixture,或者在所有测试方法前后只运行一次fixture的注解 JUnit有两个类级别(@BeforeClass和@AfterClass),两个方法级别(@Afer和@Before),总共四个fixture注解. fixture更深层次的设计理念,如何使用rule执行他们可以查看<a href="https://garygregory.wordpress.com/2011/09/25/understaning-junit-method-order-execution/" target="_blank" rel="noopener">这里</a>。<br>举例:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">package com.testing.lyc;</span><br><span class="line"></span><br><span class="line">import java.io.Closeable;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">import org.junit.After;</span><br><span class="line">import org.junit.AfterClass;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.BeforeClass;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">public class TestFixturesExample &#123;</span><br><span class="line">    static class ExpensiveManagedResource implements Closeable &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void close() throws IOException &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class ManagedResource implements Closeable &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void close() throws IOException &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @BeforeClass</span><br><span class="line">    public static void setUpClass() &#123;</span><br><span class="line">        System.out.println(&quot;@BeforeClass setUpClass&quot;);</span><br><span class="line">        myExpensiveManagedResource = new ExpensiveManagedResource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @AfterClass</span><br><span class="line">    public static void tearDownClass() throws IOException &#123;</span><br><span class="line">        System.out.println(&quot;@AfterClass tearDownClass&quot;);</span><br><span class="line">        myExpensiveManagedResource.close();</span><br><span class="line">        myExpensiveManagedResource = null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private ManagedResource myManagedResource;</span><br><span class="line">    private static ExpensiveManagedResource myExpensiveManagedResource;</span><br><span class="line"></span><br><span class="line">    private void println(String string) &#123;</span><br><span class="line">        System.out.println(string);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void setUp() &#123;</span><br><span class="line">        this.println(&quot;@Before setUp&quot;);</span><br><span class="line">        this.myManagedResource = new ManagedResource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @After</span><br><span class="line">    public void tearDown() throws IOException &#123;</span><br><span class="line">        this.println(&quot;@After tearDown&quot;);</span><br><span class="line">        this.myManagedResource.close();</span><br><span class="line">        this.myManagedResource = null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test1() &#123;</span><br><span class="line">        this.println(&quot;@Test test1()&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test2() &#123;</span><br><span class="line">        this.println(&quot;@Test test2()&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>运行结果:<br><img src="/images/test/junit_14.png" alt></p>
<h5 id="Categories"><a href="#Categories" class="headerlink" title="Categories"></a>Categories</h5><p>Categories runner只运行那些有@Category注解或者@IncludeCategory注解的类,或者它的子类的方法。任何类或者接口都可以被作为categories.@IncludeCategory(SuperClass.class)和@Category({SubClass.class})标记的类将会被运行。你可以可以用@ExcludeCategory注解排除一些类。<br>例子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public interface SlowTests &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public interface FastTests &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class A&#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void a() &#123;</span><br><span class="line">        System.out.println(&quot;A.a&quot;);</span><br><span class="line">        fail();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Category(SlowTests.class)</span><br><span class="line">    @Test</span><br><span class="line">    public void b() &#123;</span><br><span class="line">        System.out.println(&quot;A.b&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Category(&#123;SlowTests.class, FastTests.class&#125;)</span><br><span class="line">public class B &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void c() &#123;</span><br><span class="line">        System.out.println(&quot;B.c&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(Categories.class)</span><br><span class="line">@Categories.IncludeCategory(SlowTests.class)</span><br><span class="line">@Suite.SuiteClasses( &#123; A.class, B.class &#125;)</span><br><span class="line">public class SlowTestSuite &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A.b</span><br><span class="line">B.c</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(Categories.class)</span><br><span class="line">@Categories.IncludeCategory(SlowTests.class)</span><br><span class="line">@Categories.ExcludeCategory(FastTests.class)</span><br><span class="line">@Suite.SuiteClasses( &#123; A.class, B.class &#125;)</span><br><span class="line">public class SlowTestSuite2 &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A.b</span><br></pre></td></tr></table></figure>

<p><strong>在maven中使用categories</strong><br>你可以使用maven-surefire-plugin或者maven-failsafe-plugin来配置categories的include或者exclude集合.如果不使用任何选项，所有测试将被默认执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">  &lt;plugins&gt;</span><br><span class="line">    &lt;plugin&gt;</span><br><span class="line">      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;</span><br><span class="line">      &lt;configuration&gt;</span><br><span class="line">        &lt;groups&gt;com.example.FastTests,com.example.RegressionTests&lt;/groups&gt;</span><br><span class="line">      &lt;/configuration&gt;</span><br><span class="line">    &lt;/plugin&gt;</span><br><span class="line">  &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>

<p>如果要排除特定的列表,则使用标签</p>
<p><strong>categories的典型应用</strong><br>categories用于在测试中添加元数据。 categories的用途一般如下:</p>
<ul>
<li>这些类型的测试都可能用到:单元测试,集成测试,冒烟测试,回归测试,性能测试</li>
<li>怎样快速的执行测试: SlowTests, QuickTests</li>
<li>自动化测试:每日部署测试</li>
<li>测试状态: 不稳定测试,进行中测试<blockquote>
<p>根据上面文字,可以理解为categories的主要用途是用给不同测试范围准备不同的元数据的</p>
</blockquote>
</li>
</ul>
<h5 id="Multithreaded-Code-and-concurrency-多线程并发"><a href="#Multithreaded-Code-and-concurrency-多线程并发" class="headerlink" title="Multithreaded Code and concurrency 多线程并发"></a>Multithreaded Code and concurrency 多线程并发</h5><p>Junit官网案例（没有实测）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public static void assertConcurrent(final String message, final List&lt;? extends Runnable&gt; runnables, final int maxTimeoutSeconds) throws InterruptedException &#123;</span><br><span class="line">    final int numThreads = runnables.size();</span><br><span class="line">    final List&lt;Throwable&gt; exceptions = Collections.synchronizedList(new ArrayList&lt;Throwable&gt;());</span><br><span class="line">    final ExecutorService threadPool = Executors.newFixedThreadPool(numThreads);</span><br><span class="line">    try &#123;</span><br><span class="line">        final CountDownLatch allExecutorThreadsReady = new CountDownLatch(numThreads);</span><br><span class="line">        final CountDownLatch afterInitBlocker = new CountDownLatch(1);</span><br><span class="line">        final CountDownLatch allDone = new CountDownLatch(numThreads);</span><br><span class="line">        for (final Runnable submittedTestRunnable : runnables) &#123;</span><br><span class="line">            threadPool.submit(new Runnable() &#123;</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    allExecutorThreadsReady.countDown();</span><br><span class="line">                    try &#123;</span><br><span class="line">                        afterInitBlocker.await();</span><br><span class="line">                        submittedTestRunnable.run();</span><br><span class="line">                    &#125; catch (final Throwable e) &#123;</span><br><span class="line">                        exceptions.add(e);</span><br><span class="line">                    &#125; finally &#123;</span><br><span class="line">                        allDone.countDown();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        // wait until all threads are ready</span><br><span class="line">        assertTrue(&quot;Timeout initializing threads! Perform long lasting initializations before passing runnables to assertConcurrent&quot;, allExecutorThreadsReady.await(runnables.size() * 10, TimeUnit.MILLISECONDS));</span><br><span class="line">        // start all test runners</span><br><span class="line">        afterInitBlocker.countDown();</span><br><span class="line">        assertTrue(message +&quot; timeout! More than&quot; + maxTimeoutSeconds + &quot;seconds&quot;, allDone.await(maxTimeoutSeconds, TimeUnit.SECONDS));</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        threadPool.shutdownNow();</span><br><span class="line">    &#125;</span><br><span class="line">    assertTrue(message + &quot;failed with exception(s)&quot; + exceptions, exceptions.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><p>其他用法与语句可以直接去<a href="https://junit.org/junit4/" target="_blank" rel="noopener">JUnit官网</a>查看。</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2018/06/14/单元测试（一）-：JUnit框架的使用/">单元测试（一）-：JUnit4框架的使用</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">竹影</a></p>
        <p><span>发布时间:</span>2018-06-14, 18:04:13</p>
        <p><span>最后更新:</span>2018-07-03, 10:44:01</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/06/14/单元测试（一）-：JUnit框架的使用/" title="单元测试（一）-：JUnit4框架的使用">http://liyuncang.club/2018/06/14/单元测试（一）-：JUnit框架的使用/</a>
            <span class="copy-path" data-clipboard-text="原文: http://liyuncang.club/2018/06/14/单元测试（一）-：JUnit框架的使用/　　作者: 竹影" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2018/06/26/单元测试（二）：Mockito的使用/">
                    单元测试（二）：Mockito的使用
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2018/06/14/FlowLayout/">
                    FlowLayout
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#单元测试"><span class="toc-number">1.</span> <span class="toc-text">单元测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#什么是单元测试"><span class="toc-number">1.1.</span> <span class="toc-text">什么是单元测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#单元测试的目的"><span class="toc-number">1.2.</span> <span class="toc-text">单元测试的目的</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Junit介绍"><span class="toc-number">2.</span> <span class="toc-text">Junit介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Junit中常用注解："><span class="toc-number">2.1.</span> <span class="toc-text">Junit中常用注解：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Assertions（断言"><span class="toc-number">2.2.</span> <span class="toc-text">Assertions（断言)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Suites-聚合测试套件"><span class="toc-number">2.3.</span> <span class="toc-text">Suites(聚合测试套件)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Test-Execution-Order-测试执行顺序"><span class="toc-number">2.4.</span> <span class="toc-text">Test Execution Order(测试执行顺序)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Exception-Testing-异常测试"><span class="toc-number">2.5.</span> <span class="toc-text">Exception Testing (异常测试)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#预期异常"><span class="toc-number">2.5.1.</span> <span class="toc-text">预期异常</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#try-catch语法"><span class="toc-number">2.5.2.</span> <span class="toc-text">try/catch语法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ExpectedException规则"><span class="toc-number">2.5.3.</span> <span class="toc-text">ExpectedException规则</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Matchers-and-assertThat-匹配器与断言"><span class="toc-number">2.6.</span> <span class="toc-text">Matchers and assertThat(匹配器与断言)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#忽略测试"><span class="toc-number">2.7.</span> <span class="toc-text">忽略测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Timeout-for-tests-测试超时"><span class="toc-number">2.8.</span> <span class="toc-text">Timeout for tests(测试超时)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Test中的timeout参数-适用于测试方法"><span class="toc-number">2.8.1.</span> <span class="toc-text">@Test中的timeout参数(适用于测试方法)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Timeout-Rule-适用于测试类中的所有测试用例"><span class="toc-number">2.8.2.</span> <span class="toc-text">Timeout Rule(适用于测试类中的所有测试用例)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#全局超时管理JUnit-Foundation"><span class="toc-number">2.8.3.</span> <span class="toc-text">全局超时管理JUnit Foundation</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#参数化测试"><span class="toc-number">2.9.</span> <span class="toc-text">参数化测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Rules"><span class="toc-number">2.10.</span> <span class="toc-text">Rules</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#TemporaryFolder-Rule"><span class="toc-number">2.10.1.</span> <span class="toc-text">TemporaryFolder Rule:</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ExternalResource-Rules"><span class="toc-number">2.10.2.</span> <span class="toc-text">ExternalResource Rules</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ErrorCollector-Rule"><span class="toc-number">2.10.3.</span> <span class="toc-text">ErrorCollector Rule</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Verifier-Rule"><span class="toc-number">2.10.4.</span> <span class="toc-text">Verifier Rule</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#TestWatcher-Rules"><span class="toc-number">2.10.5.</span> <span class="toc-text">TestWatcher Rules</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#TestName-Rule"><span class="toc-number">2.10.6.</span> <span class="toc-text">TestName Rule</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Timeout-Rule"><span class="toc-number">2.10.7.</span> <span class="toc-text">Timeout Rule</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ExpectedException-Rules"><span class="toc-number">2.10.8.</span> <span class="toc-text">ExpectedException Rules</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ClassRule"><span class="toc-number">2.10.9.</span> <span class="toc-text">ClassRule</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#RuleChain"><span class="toc-number">2.10.10.</span> <span class="toc-text">RuleChain</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Custom-Rules"><span class="toc-number">2.10.11.</span> <span class="toc-text">Custom Rules</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Theories-理论"><span class="toc-number">2.11.</span> <span class="toc-text">Theories 理论</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Test-fixtures"><span class="toc-number">2.12.</span> <span class="toc-text">Test fixtures</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Categories"><span class="toc-number">2.13.</span> <span class="toc-text">Categories</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Multithreaded-Code-and-concurrency-多线程并发"><span class="toc-number">2.14.</span> <span class="toc-text">Multithreaded Code and concurrency 多线程并发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#其他"><span class="toc-number">2.15.</span> <span class="toc-text">其他</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"单元测试（一）-：JUnit4框架的使用　| 我的博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2018/06/26/单元测试（二）：Mockito的使用/" title="上一篇: 单元测试（二）：Mockito的使用">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2018/06/14/FlowLayout/" title="下一篇: FlowLayout">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/18/GestureDetector/">GestureDetector</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/Rxjava2-操作符/">Rxjava2 操作符</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/12/Rxjava-源码分析/">Rxjava 源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/12/Rxjava/">Rxjava2.x的基本概念和使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/16/EventBus3-0源码解析/">EventBus3.0源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/13/EventBus框架/">EventBus框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/03/单元测试（四）：Robolectric/">单元测试（四）：Robolectric</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/28/单元测试（三）：PowerMock的使用/">单元测试（三）：PowerMock的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/26/单元测试（二）：Mockito的使用/">单元测试（二）：Mockito的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/14/单元测试（一）-：JUnit框架的使用/">单元测试（一）-：JUnit4框架的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/14/FlowLayout/">FlowLayout</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/13/Androdi-build-gradle文件/"> Androdi build.gradle文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/13/AndroidStudio-添加C和C-代码/">AndroidStudio 添加C和C++代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/11/Property-Animation-属性动画高级用法/">Property Animation 属性动画高级用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/11/Animation-基本使用/">Animation 基本使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/08/java-基本算法/">java 常用排序算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/07/FileProvider/">FileProvider</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/07/夜间模式/">夜间模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/07/Android-跑马灯效果/">Android 跑马灯效果</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/07/Android子线程不能更新UI的原因/">Android子线程不能更新UI的原因</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/06/Android-四大组件/">Android 四大组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/06/Android学习API指南/">Android学习API指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/06/Android的四层体系架构/">Android的四层体系架构</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/05/Http状态码/">Http状态码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/05/贝塞尔曲线/">贝塞尔曲线</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/05/git命令/">git命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/01/Git/">Git 基本使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/01/Hexo-常用命令/">Hexo</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/01/Hexo-Github-博客/">Hexo+Github 搭建博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/30/Markdown-基本语法/">Markdown 基本语法</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2019 竹影
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>